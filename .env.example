# ============================================================================
# Rust Bangumi 環境變數配置
# ============================================================================
# 此檔案為範例配置，請複製為 .env 並根據環境修改
#
# 開發環境：使用 .env.dev 或手動設定本地開發值
# 生產環境：使用 .env.prod 或 docker-compose.yaml 中的預設值
# ============================================================================

# ============================================================================
# PostgreSQL 資料庫
# ============================================================================
POSTGRES_DB=bangumi
POSTGRES_USER=bangumi
POSTGRES_PASSWORD=changeme_secure_password
POSTGRES_PORT=5432

# 資料庫連線字串
# - 生產環境 (Docker): 由 docker-compose.yaml 自動構建，無需設定
# - 開發環境 (cargo run): 需設定以下值
# DATABASE_URL=postgresql://bangumi:bangumi_dev_password@localhost:5432/bangumi

# ============================================================================
# 服務間通信
# ============================================================================
# Core Service URL
# - 生產環境 (Docker): http://core-service:8000 (預設)
# - 開發環境 (cargo run): http://localhost:8000
CORE_SERVICE_URL=http://core-service:8000

# 服務註冊時的主機名（讓 Core Service 能回調各服務）
# - 生產環境 (Docker): 不需設定，使用代碼中的容器名預設值
# - 開發環境 (cargo run): localhost
# SERVICE_HOST=localhost

# ============================================================================
# 服務端口
# ============================================================================
CORE_PORT=8000
FETCHER_PORT=8001
DOWNLOADER_PORT=8002
VIEWER_PORT=8003

# ============================================================================
# 外部服務 - qBittorrent
# ============================================================================
# qBittorrent WebUI URL
# - 生產環境 (Docker): http://qbittorrent:8080 (預設)
# - 開發環境: http://localhost:8080 或你的 qBittorrent 地址
QBITTORRENT_URL=http://qbittorrent:8080
QBITTORRENT_WEBUI_PORT=8080
QBITTORRENT_DHT_PORT=6881

# ============================================================================
# 外部服務 - Jellyfin
# ============================================================================
JELLYFIN_PORT=8096
JELLYFIN_DISCOVERY_PORT=7359

# ============================================================================
# Viewer Jellyfin 設定
# ============================================================================
# Viewer 使用獨立的 PostgreSQL 資料庫
# - 生產環境 (Docker): 由 docker-compose.yaml 自動構建
# - 開發環境 (cargo run): 需先建立資料庫，啟動時指定 DATABASE_URL
# VIEWER_DATABASE_URL=postgresql://bangumi:bangumi_dev_password@localhost:5432/viewer_jellyfin

# 檔案目錄
# - 生產環境 (Docker): 使用 volume 掛載的 /downloads 和 /media/jellyfin
# - 開發環境 (cargo run): 指定本地目錄
DOWNLOADS_DIR=/downloads
JELLYFIN_LIBRARY_DIR=/media/jellyfin

# ============================================================================
# CORS 設定
# ============================================================================
ENABLE_CORS=true
# 允許的來源，多個用逗號分隔
# - 允許所有：*
# - 允許本地開發：http://localhost:3000,http://localhost:3001
# - 允許生產域名：https://app.example.com
CORS_ALLOWED_ORIGINS=*

# ============================================================================
# 系統配置
# ============================================================================
PUID=1000
PGID=1000
TZ=UTC
RUST_LOG=core_service=info,fetcher_mikanani=info,downloader_qbittorrent=info,viewer_jellyfin=info
RUST_BACKTRACE=0
