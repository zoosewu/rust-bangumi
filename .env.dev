# ============================================================================
# 開發環境配置 (cargo run + docker-compose.dev.yaml)
# ============================================================================
# 使用方式：
#   1. 啟動開發資料庫：docker compose -f docker-compose.dev.yaml up -d
#   2. 複製此檔案：cp .env.dev .env
#   3. 啟動服務：cargo run -p core-service
# ============================================================================

# DOOD (Docker Outside of Docker) 環境設定
# 如果在容器內使用 docker compose，需設定 host 上的專案路徑
# 留空則使用當前目錄（原生 Docker 環境）
#
# 路徑格式範例：
#   Linux:   /home/user/rust-bangumi
#   macOS:   /Users/user/rust-bangumi
#   Windows: /mnt/e/Code/Projects/nodejs/rust-bangumi  (WSL2 格式)
#            //e/Code/Projects/nodejs/rust-bangumi     (Docker Desktop 格式)
HOST_PROJECT_PATH=

# PostgreSQL（連接到 docker-compose.dev.yaml 的容器）
# 每個服務使用獨立的資料庫 URL 變數，避免互相干擾
CORE_DATABASE_URL=postgresql://bangumi:bangumi_dev_password@localhost:5432/bangumi

# 服務間通信（全部使用 localhost）
CORE_SERVICE_URL=http://localhost:8000
SERVICE_HOST=localhost

# qBittorrent（docker-compose.dev.yaml 的容器）
# 首次啟動需設置密碼，詳見 docs/DEVELOPMENT.md
QBITTORRENT_URL=http://localhost:8080
QBITTORRENT_USER=admin
QBITTORRENT_PASSWORD=adminadmin

# Viewer Jellyfin（使用獨立資料庫 viewer_jellyfin，若不存在會自動建立）
VIEWER_DATABASE_URL=postgresql://bangumi:bangumi_dev_password@localhost:5432/viewer_jellyfin

# Viewer 檔案路徑（開發環境中 viewer 以 cargo run 執行，需指向 host 上的實際目錄）
# 這些目錄與 docker-compose.dev.yaml 中 qBittorrent 和 Jellyfin 掛載的相同目錄
DOWNLOADS_DIR=tmp/bangumi-downloads
JELLYFIN_LIBRARY_DIR=tmp/bangumi-media

# 日誌級別（開發時使用 debug）
RUST_LOG=core_service=debug,fetcher_mikanani=debug,downloader_qbittorrent=debug,viewer_jellyfin=debug
RUST_BACKTRACE=1

# CORS（開發時允許所有）
ENABLE_CORS=true
CORS_ALLOWED_ORIGINS=*
